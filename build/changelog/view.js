document.addEventListener("DOMContentLoaded",function(){document.querySelectorAll(".jechangelog").forEach(e=>{const t="true"===e.dataset.collapsible,n="true"===e.dataset.defaultExpanded,o="true"===e.dataset.anchorLinks,l="true"===e.dataset.filter,a="true"===e.dataset.showMore,s=parseInt(e.dataset.initialCount)||3,r=e.querySelectorAll(".jechangelog-entry"),c=e.querySelector(".jechangelog__filter"),i=e.querySelector(".jechangelog__show-more");let g=!1,h=null,d="all";const y=e=>"all"===e?Array.from(r):Array.from(r).filter(t=>{const n=t.querySelectorAll(".jechangelog-entry__change");let o=!1;return n.forEach(t=>{const n=t.querySelector(".jechangelog-entry__badge");n&&n.classList.contains(`jechangelog-entry__badge--${e}`)&&(o=!0)}),o}),p=e=>{a&&(r.forEach(e=>{e.classList.add("jechangelog-entry--hidden"),e.classList.remove("jechangelog-entry--visible")}),e.forEach((e,t)=>{g||t<s?(e.classList.remove("jechangelog-entry--hidden"),e.classList.add("jechangelog-entry--visible")):(e.classList.add("jechangelog-entry--hidden"),e.classList.remove("jechangelog-entry--visible"))}))};if(a&&i&&r.length>s){const t=r.length-s;r.forEach((e,t)=>{t>=s&&e.classList.add("jechangelog-entry--hidden")}),h=document.createElement("button"),h.className="jechangelog__show-more-btn",h.innerHTML=`\n        <span class="jechangelog__show-more-text">Show ${t} More</span>\n        <svg class="jechangelog__show-more-icon" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">\n          <polyline points="6 9 12 15 18 9"></polyline>\n        </svg>\n      `,i.appendChild(h),h.addEventListener("click",()=>{g=!g;const t=y(d),n=t.length-s;p(t),"all"!==d&&t.forEach(e=>{e.querySelectorAll(".jechangelog-entry__change").forEach(e=>{const t=e.querySelector(".jechangelog-entry__badge");t&&t.classList.contains(`jechangelog-entry__badge--${d}`)?e.style.display="":e.style.display="none"})}),g?(h.classList.add("jechangelog__show-more-btn--expanded"),h.innerHTML='\n            <span class="jechangelog__show-more-text">Show Less</span>\n            <svg class="jechangelog__show-more-icon" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">\n              <polyline points="18 15 12 9 6 15"></polyline>\n            </svg>\n          '):(h.classList.remove("jechangelog__show-more-btn--expanded"),h.innerHTML=`\n            <span class="jechangelog__show-more-text">Show ${n} More</span>\n            <svg class="jechangelog__show-more-icon" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">\n              <polyline points="6 9 12 15 18 9"></polyline>\n            </svg>\n          `,e.scrollIntoView({behavior:"smooth",block:"start"}))})}if(l&&c){const e=["all","new","fix","improved","breaking","deprecated"],t={all:"All",new:"New",fix:"Fix",improved:"Improved",breaking:"Breaking",deprecated:"Deprecated"},n={all:0};e.slice(1).forEach(e=>n[e]=0),r.forEach(t=>{t.querySelectorAll(".jechangelog-entry__change").forEach(t=>{const o=t.querySelector(".jechangelog-entry__badge");o&&e.slice(1).forEach(e=>{o.classList.contains(`jechangelog-entry__badge--${e}`)&&(n[e]++,n.all++)})})}),e.forEach(e=>{if("all"!==e&&0===n[e])return;const o=document.createElement("button");o.className=`jechangelog__filter-btn jechangelog__filter-btn--${e}`,"all"===e&&o.classList.add("jechangelog__filter-btn--active"),o.setAttribute("data-filter",e),o.innerHTML=`${t[e]} <span class="jechangelog__filter-count">${n[e]}</span>`,c.appendChild(o),o.addEventListener("click",()=>{c.querySelectorAll(".jechangelog__filter-btn").forEach(e=>{e.classList.remove("jechangelog__filter-btn--active")}),o.classList.add("jechangelog__filter-btn--active"),d=e,g=!1,h&&h.classList.remove("jechangelog__show-more-btn--expanded");const t=y(e);(e=>{if(!a||!i||!h)return;const t=e.length,n=t-s;t>s?(i.style.display="",g||(h.innerHTML=`\n            <span class="jechangelog__show-more-text">Show ${n} More</span>\n            <svg class="jechangelog__show-more-icon" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">\n              <polyline points="6 9 12 15 18 9"></polyline>\n            </svg>\n          `)):i.style.display="none"})(t),r.forEach(t=>{const n=t.querySelectorAll(".jechangelog-entry__change");let o=0;n.forEach(t=>{const n=t.querySelector(".jechangelog-entry__badge");"all"===e||n&&n.classList.contains(`jechangelog-entry__badge--${e}`)?(t.style.display="",o++):t.style.display="none"}),"all"!==e&&0===o?(t.style.display="none",t.classList.add("jechangelog-entry--hidden"),t.classList.remove("jechangelog-entry--visible")):t.style.display=""}),a&&i&&p(t)})})}if(r.forEach(e=>{const l=e.querySelector(".jechangelog-entry__header"),a=e.querySelector(".jechangelog-entry__changes"),s=e.querySelector(".jechangelog-entry__version");if(!l||!s)return;const r=`v${s.textContent.trim().replace(/^v/,"")}`;if(o){e.id=r,e.classList.add("jechangelog-entry--has-anchor");const t=document.createElement("button");t.className="jechangelog-entry__copy-link",t.setAttribute("aria-label","Copy link to this version"),t.innerHTML='\n          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">\n            <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path>\n            <path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path>\n          </svg>\n        ';const n=l.querySelector(".jechangelog-entry__toggle");n?l.insertBefore(t,n):l.appendChild(t),t.addEventListener("click",e=>{e.stopPropagation(),e.preventDefault(),(e=>{if(navigator.clipboard&&window.isSecureContext)return navigator.clipboard.writeText(e);{const t=document.createElement("textarea");return t.value=e,t.style.position="fixed",t.style.left="-9999px",t.style.top="-9999px",document.body.appendChild(t),t.focus(),t.select(),new Promise((e,n)=>{try{document.execCommand("copy"),e()}catch(e){n(e)}finally{t.remove()}})}})(`${window.location.href.split("#")[0]}#${r}`).then(()=>{t.classList.add("jechangelog-entry__copy-link--copied"),t.innerHTML='\n                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">\n                  <polyline points="20 6 9 17 4 12"></polyline>\n                </svg>\n              ',setTimeout(()=>{t.classList.remove("jechangelog-entry__copy-link--copied"),t.innerHTML='\n                  <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">\n                    <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path>\n                    <path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path>\n                  </svg>\n                '},2e3)}).catch(e=>{console.error("Copy failed:",e)})})}if(t&&a){e.classList.add("jechangelog-entry--collapsible"),n?e.classList.add("jechangelog-entry--expanded"):e.classList.add("jechangelog-entry--collapsed");const t=document.createElement("span");t.className="jechangelog-entry__toggle",t.innerHTML='\n          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">\n            <polyline points="6 9 12 15 18 9"></polyline>\n          </svg>\n        ',l.appendChild(t),l.style.cursor="pointer",l.setAttribute("role","button"),l.setAttribute("tabindex","0"),l.setAttribute("aria-expanded",n?"true":"false");const o=()=>{e.classList.contains("jechangelog-entry--expanded")?(e.classList.remove("jechangelog-entry--expanded"),e.classList.add("jechangelog-entry--collapsed"),l.setAttribute("aria-expanded","false")):(e.classList.remove("jechangelog-entry--collapsed"),e.classList.add("jechangelog-entry--expanded"),l.setAttribute("aria-expanded","true"))};l.addEventListener("click",e=>{e.target.closest(".jechangelog-entry__copy-link")||o()}),l.addEventListener("keydown",e=>{"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),o())})}}),o&&window.location.hash){const e=window.location.hash.slice(1),t=document.getElementById(e);if(t){if(t.classList.contains("jechangelog-entry--hidden")&&(t.classList.remove("jechangelog-entry--hidden"),t.classList.add("jechangelog-entry--visible")),t.classList.contains("jechangelog-entry--collapsed")){t.classList.remove("jechangelog-entry--collapsed"),t.classList.add("jechangelog-entry--expanded");const e=t.querySelector(".jechangelog-entry__header");e&&e.setAttribute("aria-expanded","true")}setTimeout(()=>{t.scrollIntoView({behavior:"smooth",block:"start"}),t.classList.add("jechangelog-entry--highlighted"),setTimeout(()=>{t.classList.remove("jechangelog-entry--highlighted")},2e3)},100)}}})});